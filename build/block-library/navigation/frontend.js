(()=>{class e{constructor(e){this.parent=e,this.sidebarWrapper=document.querySelector(".sidebar-wrapper"),this.navigationScrim=document.querySelector(".wsu-navigation-menu--scrim"),this.openSearchTargets=document.querySelectorAll(".quicklinks-panel-toggle .wp-element-button"),this.closeSearchTarget=document.querySelector(".search-menu--close .hrswds-svg-icon-container"),this.menuControls={menuToggle:document.querySelector("button.open-site-navigation"),closeMenuTarget:document.querySelector(".wsu-navigation-menu--close .hrswds-svg-icon-container")},this.mediaQuery=window.matchMedia("(min-width: 1260px)"),this.openMenu=this.openMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.openSearchMenu=this.openSearchMenu.bind(this),this.closeSearchMenu=this.closeSearchMenu.bind(this),this.handleMediaExpand=this.handleMediaExpand.bind(this),this.setSubmenuActive=this.setSubmenuActive.bind(this),this.init()}init(){return this.openSearchTargets.forEach((e=>{this.initButton(e,"Open search menu","quicklinks-search-menu")})),this.initButton(this.menuControls.closeMenuTarget,"Close site navigation","site-navigation-parent"),this.initButton(this.closeSearchTarget,"Close search menu","quicklinks-search-menu"),this.addEventListeners(),this.setSubmenuActive(),()=>{this.mediaQuery.removeEventListener("change",this.handleMediaExpand)}}openMenu(){this.sidebarWrapper.classList.add("show-sidebar","show-scrim-menu"),Object.values(this.menuControls).forEach((e=>{this.toggleAttributes(e,"Close site navigation")})),this.navigationScrim.addEventListener("click",this.closeMenu)}closeMenu(){this.sidebarWrapper.classList.remove("show-sidebar","show-scrim-menu"),Object.values(this.menuControls).forEach((e=>{this.toggleAttributes(e,"Open site navigation")}))}openSearchMenu(){document.getElementById(this.closeSearchTarget.getAttribute("aria-controls")).classList.add("show-menu"),this.sidebarWrapper.classList.add("show-scrim-search"),this.openSearchTargets.forEach((e=>{this.toggleAttributes(e,"Close search menu")})),this.closeSearchTarget.setAttribute("aria-expanded","true"),this.navigationScrim.addEventListener("click",this.closeSearchMenu)}closeSearchMenu(){document.getElementById(this.closeSearchTarget.getAttribute("aria-controls")).classList.remove("show-menu"),this.sidebarWrapper.classList.remove("show-scrim-search"),this.openSearchTargets.forEach((e=>{this.toggleAttributes(e,"Open search menu")})),this.closeSearchTarget.setAttribute("aria-expanded","false")}toggleMenu(){this._isMenuOpen()?this.closeMenu():this.openMenu()}handleMediaExpand(){this.mediaQuery.matches&&this.sidebarWrapper.classList.remove("show-sidebar","show-scrim-menu")}addEventListeners(){this.menuControls.menuToggle.addEventListener("click",this.toggleMenu),this.menuControls.closeMenuTarget.addEventListener("click",this.closeMenu),this.openSearchTargets.forEach((e=>{e.addEventListener("click",this.openSearchMenu)})),this.closeSearchTarget.addEventListener("click",this.closeSearchMenu),document.addEventListener("keyup",(e=>{"Escape"===e.key&&(this._isMenuOpen()&&this.closeMenu(),this._isSearchOpen()&&this.closeSearchMenu())})),this.mediaQuery.addEventListener("change",this.handleMediaExpand)}initButton(e,t,s){e.setAttribute("aria-expanded","false"),e.setAttribute("title",t),e.setAttribute("aria-label",t),e.setAttribute("aria-controls",s)}toggleAttributes(e,t=""){const s="true"===e.getAttribute("aria-expanded")?"false":"true";e.setAttribute("aria-expanded",s),e.setAttribute("aria-label",t),e.setAttribute("title",t)}_isMenuOpen(){return this.sidebarWrapper.classList.contains("show-sidebar")}_isSearchOpen(){return this.sidebarWrapper.classList.contains("show-scrim-search")}setSubmenuActive(){const e=this.parent.querySelector(".current-menu-ancestor ~ button");e&&setTimeout((()=>e.setAttribute("aria-expanded",!0)),100)}}!function(){const t=document.querySelector("nav.site-navigation");t&&new e(t)}()})();